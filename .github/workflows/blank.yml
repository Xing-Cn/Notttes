name: ç¬”è®°åº“æ™ºèƒ½æ£€æŸ¥

on:
  push:
    branches: [ main ]

jobs:
  check-and-update:
    runs-on: ubuntu-latest
    
    steps:
    - name: è·å–ä»“åº“ä»£ç 
      uses: actions/checkout@v4
      
    - name: æ›´æ–°READMEç»Ÿè®¡
      run: |
        # è·å–ç»Ÿè®¡ä¿¡æ¯
        NOTE_COUNT=$(find . -name "*.md" | wc -l)
        
        # ç›´æ¥åœ¨å‘½ä»¤ä¸­ç”Ÿæˆæ—¶é—´ï¼Œé¿å…å˜é‡é—®é¢˜
        echo "" >> README.md
        echo "## ğŸš€ å®æ—¶ç»Ÿè®¡" >> README.md
        echo "> æœ€ååŒæ­¥: $(date '+%Y-%m-%d %H:%M')" >> README.md
        echo "" >> README.md
        echo "- ç¬”è®°æ€»æ•°: $NOTE_COUNT ç¯‡" >> README.md
        echo "- æ£€æŸ¥çŠ¶æ€: âœ… è¿è¡Œæ­£å¸¸" >> README.md
        echo "" >> README.md
        echo "*è‡ªåŠ¨æ›´æ–°*" >> README.md
        
    - name: æäº¤æ›´æ”¹
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git add README.md
        git commit -m "ğŸ“Š æ›´æ–°ç»Ÿè®¡" || exit 0
        git push
